{\
% foreach $char ( sort keys %paths ) {
%  $i = $j = 1;
%  %on = ();
'<% $char %>':'\
%  foreach $y ( 0 .. 6 ) {
%   foreach $x ( 0 .. 4 ) {
%    if ( exists $paths{ $char }{ $i } ) {
%     $bleed = $down{ $char }{ $i } ? ( $right{ $char }{ $i } ? 'b' : 'd' ) : ( $right{ $char }{ $i } ? 'r' : '' );
<rect class="<% $paths{ $char }{ $i } %><% $bleed ? ( ' ' . $bleed ) : '' %>" x=<% $x * 10 %> y=<% $y * 10 %>/>\
%    }
%    $i++;
%   }
%  }
',\
% }
'BLANK':'\
% foreach $y ( 0 .. 6 ) {
%  foreach $x ( 0 .. 4 ) {
%   # <rect x=<% $x * 10 %> y=<% $y * 10 %>/>\
%  }
% }
'}\\
<%init>
  my ( $bleed, $char, %down, $i, $j, $key, %on, %paths, %right, $x, $y );

  %down = (
    'a' => {  6 => 1, 10 => 1, 11 => 1, 15 => 1, 16 => 1, 20 => 1, 21 => 1, 25 => 1, 26 => 1, 30 => 1 },
    'b' => {  1 => 1,  6 => 1, 10 => 1, 11 => 1, 16 => 1, 21 => 1, 25 => 1, 26 => 1 },
    'c' => {  6 => 1, 11 => 1, 16 => 1, 21 => 1 },
    'd' => {  1 => 1,  6 => 1, 10 => 1, 11 => 1, 15 => 1, 16 => 1, 20 => 1, 21 => 1, 25 => 1, 26 => 1 },
    'e' => {  1 => 1,  6 => 1, 11 => 1, 16 => 1, 21 => 1, 26 => 1 },
    'f' => {  1 => 1,  6 => 1, 11 => 1, 16 => 1, 21 => 1, 26 => 1 },
    'g' => {  6 => 1, 11 => 1, 16 => 1, 20 => 1, 21 => 1, 25 => 1 },
    'h' => {  1 => 1,  5 => 1,  6 => 1, 10 => 1, 11 => 1, 15 => 1, 16 => 1, 20 => 1, 21 => 1, 25 => 1, 26 => 1, 30 => 1 },
    'i' => {  3 => 1,  8 => 1, 13 => 1, 18 => 1, 23 => 1, 28 => 1 },
    'j' => {  5 => 1, 10 => 1, 15 => 1, 20 => 1, 25 => 1 },
    'k' => {  1 => 1,  6 => 1, 11 => 1, 16 => 1, 21 => 1, 26 => 1 },
    'l' => {  1 => 1,  6 => 1, 11 => 1, 16 => 1, 21 => 1, 26 => 1 },
    'm' => {  1 => 1,  5 => 1,  6 => 1, 10 => 1, 11 => 1, 15 => 1, 16 => 1, 20 => 1, 21 => 1, 25 => 1, 26 => 1, 30 => 1 },
    'n' => {  1 => 1,  5 => 1,  6 => 1, 10 => 1, 11 => 1, 15 => 1, 16 => 1, 20 => 1, 21 => 1, 25 => 1, 26 => 1, 30 => 1 },
    'o' => {  6 => 1, 10 => 1, 11 => 1, 15 => 1, 16 => 1, 20 => 1, 21 => 1, 25 => 1 },
    'p' => {  1 => 1,  6 => 1, 10 => 1, 11 => 1, 16 => 1, 21 => 1, 26 => 1 },
    'q' => {  6 => 1, 10 => 1, 11 => 1, 15 => 1, 16 => 1, 20 => 1, 21 => 1 },
    'r' => {  1 => 1,  6 => 1, 10 => 1, 11 => 1, 16 => 1, 18 => 1, 21 => 1, 26 => 1 },
    's' => {  6 => 1, 25 => 1 },
    't' => {  3 => 1,  8 => 1, 13 => 1, 18 => 1, 23 => 1, 28 => 1 },
    'u' => {  1 => 1,  5 => 1,  6 => 1, 10 => 1, 11 => 1, 15 => 1, 16 => 1, 20 => 1, 21 => 1, 25 => 1 },
    'v' => {  1 => 1,  5 => 1,  6 => 1, 10 => 1, 11 => 1, 15 => 1, 16 => 1, 20 => 1 },
    'w' => {  1 => 1,  5 => 1,  6 => 1, 10 => 1, 11 => 1, 15 => 1, 16 => 1, 20 => 1, 21 => 1, 25 => 1, 26 => 1, 30 => 1 },
    'x' => {  1 => 1,  5 => 1, 26 => 1, 30 => 1 },
    'y' => { 13 => 1, 18 => 1, 23 => 1, 28 => 1 },
    'z' => {  5 => 1, 26 => 1 }
    );

  %paths = (
    'a' => { 31 => 1, 26 => 2, 21 => 3, 16 => 4, 11 => 5,  6 => 6,  2 => 7,  3 => 8,  4 => 9, 10 => 10, 15 => 11, 20 => 12, 25 => 13, 30 => 14, 35 => 15, 17 => 16, 18 => 17, 19 => 18 },
    'b' => { 31 => 1, 26 => 2, 21 => 3, 16 => 4, 11 => 5,  6 => 6,  1 => 7,  2 => 8,  3 => 9,  4 => 10, 10 => 11, 15 => 12, 19 => 13, 18 => 14, 17 => 15, 25 => 16, 30 => 17, 34 => 18, 33 => 19, 32 => 20 },
    'c' => { 10 => 1,  4 => 2,  3 => 3,  2 => 4,  6 => 5, 11 => 6, 16 => 7, 21 => 8, 26 => 9, 32 => 10, 33 => 11, 34 => 12, 30 => 13 },
    'd' => { 31 => 1, 26 => 2, 21 => 3, 16 => 4, 11 => 5,  6 => 6,  1 => 7,  2 => 8,  3 => 9,  4 => 10, 10 => 11, 15 => 12, 20 => 13, 25 => 14, 30 => 15, 34 => 16, 33 => 17, 32 => 18 },
    'e' => {  5 => 1,  4 => 2,  3 => 3,  2 => 4,  1 => 5,  6 => 6, 11 => 7, 16 => 8, 21 => 9, 26 => 10, 31 => 11, 32 => 12, 33 => 13, 34 => 14, 35 => 15, 17 => 16, 18 => 17, 19 => 18, 20 => 19 },
    'f' => { 31 => 1, 26 => 2, 21 => 3, 16 => 4, 11 => 5,  6 => 6,  1 => 7,  2 => 8,  3 => 9,  4 => 10,  5 => 11, 17 => 12, 18 => 13, 19 => 14, 20 => 15 },
    'g' => { 10 => 1,  4 => 2,  3 => 3,  2 => 4,  6 => 5, 11 => 6, 16 => 7, 21 => 8, 26 => 9, 32 => 10, 33 => 11, 34 => 12, 30 => 13, 25 => 14, 20 => 15, 19 => 16 },
    'h' => {  1 => 1,  6 => 2, 11 => 3, 16 => 4, 21 => 5, 26 => 6, 31 => 7, 17 => 8, 18 => 9, 19 => 10,  5 => 11, 10 => 12, 15 => 13, 20 => 14, 25 => 15, 30 => 16, 35 => 17 },
    'i' => {  1 => 1,  2 => 2,  3 => 3,  4 => 4,  5 => 5,  8 => 6, 13 => 7, 18 => 8, 23 => 9, 28 => 10, 31 => 11, 32 => 12, 33 => 13, 34 => 14, 35 => 15 },
    'j' => {  5 => 1, 10 => 2, 15 => 3, 20 => 4, 25 => 5, 30 => 6, 34 => 7, 33 => 8, 32 => 9, 26 => 10 },
    'k' => {  1 => 1,  6 => 2, 11 => 3, 16 => 4, 21 => 5, 26 => 6, 31 => 7,  5 => 8,  9 => 9, 13 => 10, 17 => 11, 23 => 12, 29 => 13, 35 => 14 },
    'l' => {  1 => 1,  6 => 2, 11 => 3, 16 => 4, 21 => 5, 26 => 6, 31 => 7, 32 => 8, 33 => 9, 34 => 10, 35 => 11 },
    'm' => { 31 => 1, 26 => 2, 21 => 3, 16 => 4, 11 => 5,  6 => 6,  1 => 7,  7 => 8, 13 => 9,  9 => 10,  5 => 11, 10 => 12, 15 => 13, 20 => 14, 25 => 15, 30 => 16, 35 => 17 },
    'n' => { 31 => 1, 26 => 2, 21 => 3, 16 => 4, 11 => 5,  6 => 6,  1 => 7, 12 => 8, 18 => 9, 24 => 10, 35 => 11, 30 => 12, 25 => 13, 20 => 14, 15 => 15, 10 => 16,  5 => 17 },
    'o' => {  2 => 1,  3 => 2,  4 => 3, 10 => 4, 15 => 5, 20 => 6, 25 => 7, 30 => 8, 34 => 9, 33 => 10, 32 => 11, 26 => 12, 21 => 13, 16 => 14, 11 => 15,  6 => 16 },
    'p' => { 31 => 1, 26 => 2, 21 => 3, 16 => 4, 11 => 5,  6 => 6,  1 => 7,  2 => 8,  3 => 9,  4 => 10, 10 => 11, 15 => 12, 19 => 13, 18 => 14, 17 => 15 },
    'q' => {  2 => 1,  3 => 2,  4 => 3, 10 => 4, 15 => 5, 20 => 6, 25 => 7, 33 => 8, 32 => 9, 26 => 10, 21 => 11, 16 => 12, 11 => 13,  6 => 14, 23 => 15, 29 => 16, 35 => 17 },
    'r' => { 31 => 1, 26 => 2, 21 => 3, 16 => 4, 11 => 5,  6 => 6,  1 => 7,  2 => 8,  3 => 9,  4 => 10, 10 => 11, 15 => 12, 19 => 13, 18 => 14, 17 => 15, 23 => 16, 29 => 17, 35 => 18 },
    's' => { 10 => 1,  4 => 2,  3 => 3,  2 => 4,  6 => 5, 11 => 6, 17 => 7, 18 => 8, 19 => 9, 25 => 10, 30 => 11, 34 => 12, 33 => 13, 32 => 14, 26 => 15 },
    't' => {  1 => 1,  2 => 2,  3 => 3,  4 => 4,  5 => 5,  8 => 6, 13 => 7, 18 => 8, 23 => 9, 28 => 10, 33 => 11 },
    'u' => {  1 => 1,  6 => 2, 11 => 3, 16 => 4, 21 => 5, 26 => 6, 32 => 7, 33 => 8, 34 => 9, 30 => 10, 25 => 11, 20 => 12, 15 => 13, 10 => 14,  5 => 15 },
    'v' => {  1 => 1,  6 => 2, 11 => 3, 16 => 4, 21 => 5, 27 => 6, 33 => 7, 29 => 8, 25 => 9, 20 => 10, 15 => 11, 10 => 12,  5 => 13 },
    'w' => {  1 => 1,  6 => 2, 11 => 3, 16 => 4, 21 => 5, 26 => 6, 31 => 7, 27 => 8, 23 => 9, 29 => 10, 35 => 11, 30 => 12, 25 => 13, 20 => 14, 15 => 15, 10 => 16, 5 => 17 },
    'x' => {  1 => 1,  6 => 2, 12 => 3, 24 => 4, 30 => 5, 35 => 6,  5 => 7, 10 => 8, 14 => 9, 18 => 10, 22 => 11, 26 => 12, 31 => 13 },
    'y' => {  1 => 1,  7 => 2, 13 => 3,  9 => 4,  5 => 5, 18 => 6, 23 => 7, 28 => 8, 33 => 9 },
    'z' => {  1 => 1,  2 => 2,  3 => 3,  4 => 4,  5 => 5, 10 => 6, 14 => 7, 18 => 8, 22 => 9, 26 => 10, 31 => 11, 32 => 12, 33 => 13, 34 => 14, 35 => 15 }
    );

  %right = (
    'a' => { 16 => 1,  2 => 1,  3 => 1, 17 => 1, 18 => 1, 19 => 1 },
    'b' => {  1 => 1,  2 => 1,  3 => 1, 16 => 1, 17 => 1, 18 => 1, 31 => 1, 32 => 1, 33 => 1 },
    'c' => {  2 => 1,  3 => 1, 32 => 1, 33 => 1 },
    'd' => {  1 => 1,  2 => 1,  3 => 1, 31 => 1, 32 => 1, 33 => 1 },
    'e' => {  1 => 1,  2 => 1,  3 => 1,  4 => 1, 16 => 1, 17 => 1, 18 => 1, 19 => 1, 31 => 1, 32 => 1, 33 => 1, 34 => 1 },
    'f' => {  1 => 1,  2 => 1,  3 => 1,  4 => 1, 16 => 1, 17 => 1, 18 => 1, 19 => 1 },
    'g' => {  2 => 1,  3 => 1, 19 => 1, 32 => 1, 33 => 1 },
    'h' => { 16 => 1, 17 => 1, 18 => 1, 19 => 1 },
    'i' => {  1 => 1,  2 => 1,  3 => 1,  4 => 1, 31 => 1, 32 => 1, 33 => 1, 34 => 1 },
    'j' => { 31 => 1, 32 => 1 },
    'k' => { 16 => 1 },
    'l' => { 31 => 1, 32 => 1, 33 => 1, 34 => 1 },
    'm' => {  6 => 1,  9 => 1 },
    'n' => { 11 => 1, 24 => 1 },
    'o' => {  2 => 1,  3 => 1, 32 => 1, 33 => 1 },
    'p' => {  1 => 1,  2 => 1,  3 => 1, 16 => 1, 17 => 1, 18 => 1 },
    'q' => {  2 => 1,  3 => 1, 32 => 1 },
    'r' => {  1 => 1,  2 => 1,  3 => 1, 16 => 1, 17 => 1, 18 => 1 },
    's' => {  2 => 1,  3 => 1, 17 => 1, 18 => 1, 32 => 1, 33 => 1 },
    't' => {  1 => 1,  2 => 1,  3 => 1,  4 => 1 },
    'u' => {  32 => 1, 33 => 1 },
    'v' => { },
    'w' => { 26 => 1, 29 => 1 },
    'x' => { },
    'y' => { },
    'z' => {  1 => 1,  2 => 1,  3 => 1,  4 => 1, 31 => 1, 32 => 1, 33 => 1, 34 => 1 }
    );
</%init>
